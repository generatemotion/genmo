<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Blender Python API | GenMo</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Generate Motion">
    
    <link rel="preload" href="/genmo/assets/css/0.styles.84f978c2.css" as="style"><link rel="preload" href="/genmo/assets/js/app.26c693c1.js" as="script"><link rel="preload" href="/genmo/assets/js/2.778bb4ad.js" as="script"><link rel="preload" href="/genmo/assets/js/1.50b457b8.js" as="script"><link rel="preload" href="/genmo/assets/js/29.55f636cd.js" as="script"><link rel="prefetch" href="/genmo/assets/js/10.325b9f09.js"><link rel="prefetch" href="/genmo/assets/js/11.c62b6b34.js"><link rel="prefetch" href="/genmo/assets/js/12.ecdb524b.js"><link rel="prefetch" href="/genmo/assets/js/13.3f3f6a36.js"><link rel="prefetch" href="/genmo/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/genmo/assets/js/15.114dfd5c.js"><link rel="prefetch" href="/genmo/assets/js/16.85253907.js"><link rel="prefetch" href="/genmo/assets/js/17.c2838453.js"><link rel="prefetch" href="/genmo/assets/js/18.3256f17f.js"><link rel="prefetch" href="/genmo/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/genmo/assets/js/20.10e47ab9.js"><link rel="prefetch" href="/genmo/assets/js/21.33b300c9.js"><link rel="prefetch" href="/genmo/assets/js/22.325f97d5.js"><link rel="prefetch" href="/genmo/assets/js/23.a51c925e.js"><link rel="prefetch" href="/genmo/assets/js/24.22712080.js"><link rel="prefetch" href="/genmo/assets/js/25.e8554233.js"><link rel="prefetch" href="/genmo/assets/js/26.5859999a.js"><link rel="prefetch" href="/genmo/assets/js/27.64aaa112.js"><link rel="prefetch" href="/genmo/assets/js/28.74e53adc.js"><link rel="prefetch" href="/genmo/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/genmo/assets/js/30.842ab42d.js"><link rel="prefetch" href="/genmo/assets/js/31.0badfc85.js"><link rel="prefetch" href="/genmo/assets/js/32.931dc4b4.js"><link rel="prefetch" href="/genmo/assets/js/33.f0ea27b3.js"><link rel="prefetch" href="/genmo/assets/js/34.3aa0c414.js"><link rel="prefetch" href="/genmo/assets/js/35.8dadf405.js"><link rel="prefetch" href="/genmo/assets/js/36.989f54d3.js"><link rel="prefetch" href="/genmo/assets/js/37.46cbd986.js"><link rel="prefetch" href="/genmo/assets/js/38.97296340.js"><link rel="prefetch" href="/genmo/assets/js/39.5962b011.js"><link rel="prefetch" href="/genmo/assets/js/4.45665f8a.js"><link rel="prefetch" href="/genmo/assets/js/40.5f3de182.js"><link rel="prefetch" href="/genmo/assets/js/41.d2a9613d.js"><link rel="prefetch" href="/genmo/assets/js/42.a698d78e.js"><link rel="prefetch" href="/genmo/assets/js/43.f6af9a36.js"><link rel="prefetch" href="/genmo/assets/js/44.74fed02e.js"><link rel="prefetch" href="/genmo/assets/js/45.39c81079.js"><link rel="prefetch" href="/genmo/assets/js/46.e41a75b4.js"><link rel="prefetch" href="/genmo/assets/js/47.e6fc9c03.js"><link rel="prefetch" href="/genmo/assets/js/48.8f6cc604.js"><link rel="prefetch" href="/genmo/assets/js/49.a5ad7ee5.js"><link rel="prefetch" href="/genmo/assets/js/5.7098d77a.js"><link rel="prefetch" href="/genmo/assets/js/50.1881828f.js"><link rel="prefetch" href="/genmo/assets/js/51.ce4cd92a.js"><link rel="prefetch" href="/genmo/assets/js/52.adcabbc6.js"><link rel="prefetch" href="/genmo/assets/js/53.f2f86279.js"><link rel="prefetch" href="/genmo/assets/js/54.36a50147.js"><link rel="prefetch" href="/genmo/assets/js/55.e094f2d2.js"><link rel="prefetch" href="/genmo/assets/js/56.bb877cbe.js"><link rel="prefetch" href="/genmo/assets/js/57.c54b788e.js"><link rel="prefetch" href="/genmo/assets/js/58.5ef6e07e.js"><link rel="prefetch" href="/genmo/assets/js/59.48f41fd9.js"><link rel="prefetch" href="/genmo/assets/js/6.0c0a0f39.js"><link rel="prefetch" href="/genmo/assets/js/60.4e7540b6.js"><link rel="prefetch" href="/genmo/assets/js/61.8f461756.js"><link rel="prefetch" href="/genmo/assets/js/62.6219f95f.js"><link rel="prefetch" href="/genmo/assets/js/63.0447b50c.js"><link rel="prefetch" href="/genmo/assets/js/64.72f54285.js"><link rel="prefetch" href="/genmo/assets/js/65.1a00a05f.js"><link rel="prefetch" href="/genmo/assets/js/66.c9a0a3cb.js"><link rel="prefetch" href="/genmo/assets/js/67.5a16509d.js"><link rel="prefetch" href="/genmo/assets/js/68.480a63ec.js"><link rel="prefetch" href="/genmo/assets/js/69.9e67f88e.js"><link rel="prefetch" href="/genmo/assets/js/7.6a854e57.js"><link rel="prefetch" href="/genmo/assets/js/70.b035d654.js"><link rel="prefetch" href="/genmo/assets/js/71.06314f6b.js"><link rel="prefetch" href="/genmo/assets/js/72.0d9dec58.js"><link rel="prefetch" href="/genmo/assets/js/73.732392b9.js"><link rel="prefetch" href="/genmo/assets/js/74.d4876ba2.js"><link rel="prefetch" href="/genmo/assets/js/75.79eb6294.js"><link rel="prefetch" href="/genmo/assets/js/76.6a0cf2e1.js"><link rel="prefetch" href="/genmo/assets/js/77.51d58148.js"><link rel="prefetch" href="/genmo/assets/js/78.90b53af6.js"><link rel="prefetch" href="/genmo/assets/js/79.b2c388b9.js"><link rel="prefetch" href="/genmo/assets/js/80.6652051c.js"><link rel="prefetch" href="/genmo/assets/js/81.e9a08b1d.js"><link rel="prefetch" href="/genmo/assets/js/82.ab554a28.js"><link rel="prefetch" href="/genmo/assets/js/83.d195d64f.js"><link rel="prefetch" href="/genmo/assets/js/84.640f2c5d.js"><link rel="prefetch" href="/genmo/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/genmo/assets/css/0.styles.84f978c2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/genmo/" class="home-link router-link-active"><img src="/genmo/logo3.png" alt="GenMo" class="logo"> <span class="site-name can-hide">GenMo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/genmo/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/genmo/guide.html" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="深入掌握深度生成技术" class="dropdown-title"><span class="title">AIGC学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="深入掌握深度生成技术" class="mobile-dropdown-title"><span class="title">AIGC学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/genmo/dm/" class="nav-link">
  扩散模型
</a></li><li class="dropdown-item"><!----> <a href="/genmo/osp/" class="nav-link">
  开源项目
</a></li><li class="dropdown-item"><!----> <a href="/genmo/hf/" class="nav-link">
  HF学习
</a></li><li class="dropdown-item"><!----> <a href="/genmo/tvm/" class="nav-link">
  TVM学习
</a></li><li class="dropdown-item"><!----> <a href="/genmo/tinyml/" class="nav-link">
  TinyML学习
</a></li><li class="dropdown-item"><!----> <a href="/genmo/t2m/" class="nav-link">
  动作生成学习
</a></li><li class="dropdown-item"><!----> <a href="/genmo/bpy/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  BPY学习
</a></li></ul></div></div><div class="nav-item"><a href="/genmo/handon/" class="nav-link">
  实战
</a></div><div class="nav-item"><a href="/genmo/about.html" class="nav-link">
  关于
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/genmo/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/genmo/guide.html" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="深入掌握深度生成技术" class="dropdown-title"><span class="title">AIGC学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="深入掌握深度生成技术" class="mobile-dropdown-title"><span class="title">AIGC学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/genmo/dm/" class="nav-link">
  扩散模型
</a></li><li class="dropdown-item"><!----> <a href="/genmo/osp/" class="nav-link">
  开源项目
</a></li><li class="dropdown-item"><!----> <a href="/genmo/hf/" class="nav-link">
  HF学习
</a></li><li class="dropdown-item"><!----> <a href="/genmo/tvm/" class="nav-link">
  TVM学习
</a></li><li class="dropdown-item"><!----> <a href="/genmo/tinyml/" class="nav-link">
  TinyML学习
</a></li><li class="dropdown-item"><!----> <a href="/genmo/t2m/" class="nav-link">
  动作生成学习
</a></li><li class="dropdown-item"><!----> <a href="/genmo/bpy/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  BPY学习
</a></li></ul></div></div><div class="nav-item"><a href="/genmo/handon/" class="nav-link">
  实战
</a></div><div class="nav-item"><a href="/genmo/about.html" class="nav-link">
  关于
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/genmo/bpy/" aria-current="page" class="sidebar-heading clickable router-link-exact-active router-link-active open active"><span>基础</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/genmo/bpy/api-overview.html" class="sidebar-link">AP概览</a></li><li><a href="/genmo/bpy/api-ref-usage.html" class="sidebar-link">API使用</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="blender-python-api"><a href="#blender-python-api" class="header-anchor">#</a> Blender Python API</h1> <p>Blender提供python接口，基于此接口，可以完成如下的功能：</p> <ul><li>编辑用户界面可以编辑的任何数据（场景、网格、粒子等）。</li> <li>修改用户偏好、键盘映射和主题。</li> <li>使用自己的设置运行工具。</li> <li>创建用户界面元素，例如菜单、标题和面板。</li> <li>创建新工具。</li> <li>创建交互式工具。</li> <li>创建与 Blender 集成的新渲染引擎。</li> <li>订阅数据及其属性的更改。</li> <li>在现有的 Blender 数据中定义新设置。</li> <li>使用 Python 在 3D 视口中绘图。</li></ul> <h1 id="关键概念"><a href="#关键概念" class="header-anchor">#</a> 关键概念</h1> <h2 id="数据"><a href="#数据" class="header-anchor">#</a> 数据</h2> <h3 id="访问数据块"><a href="#访问数据块" class="header-anchor">#</a> 访问数据块</h3> <p>你可以使用 Python API 以与动画系统或用户界面相同的方式访问 Blender 的数据；这意味着可以通过按钮更改的任何设置也可以使用 Python 进行更改。使用模块可以访问当前加载的 blend 文件中的数据bpy.data。它可以访问库数据，例如：</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; bpy.data.objects
&lt;bpy_collection[3], BlendDataObjects&gt;
&gt;&gt;&gt; bpy.data.scenes
&lt;bpy_collection[1], BlendDataScenes&gt;
&gt;&gt;&gt; bpy.data.materials
&lt;bpy_collection[1], BlendDataMaterials&gt;
</code></pre></div><p>您会注意到，可以使用索引和字符串来访问集合的成员。与 Python 字典不同，这两种方法都可用；但是，成员的索引可能会在运行 Blender 时发生变化</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; list(bpy.data.objects)
[bpy.data.objects[&quot;Cube&quot;], bpy.data.objects[&quot;Plane&quot;]]
&gt;&gt;&gt; bpy.data.objects['Cube']
bpy.data.objects[&quot;Cube&quot;]
&gt;&gt;&gt; bpy.data.objects[0]
bpy.data.objects[&quot;Cube&quot;]
</code></pre></div><p>一旦你有了数据块，比如材料、物体、集合等，它的属性就可以像使用图形界面更改设置一样访问。事实上，每个按钮的工具提示还会显示 Python 属性，这有助于找到脚本中要更改的设置。</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; bpy.data.objects[0].name
'Camera'
&gt;&gt;&gt; bpy.data.scenes[&quot;Scene&quot;]
bpy.data.scenes['Scene']
&gt;&gt;&gt; bpy.data.materials.new(&quot;MyMaterial&quot;)
bpy.data.materials['MyMaterial']
</code></pre></div><p>为了测试要访问哪些数据，使用 Python 控制台（它有自己的空间类型）很有用。它支持自动完成，让您可以快速探索文件中的数据。</p> <p>通过控制台可以快速找到的数据路径示例：</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; bpy.data.scenes[0].render.resolution_percentage
100
&gt;&gt;&gt; bpy.data.scenes[0].objects[&quot;Torus&quot;].data.vertices[0].co.x
1.0
</code></pre></div><h3 id="数据创建-删除"><a href="#数据创建-删除" class="header-anchor">#</a> 数据创建/删除</h3> <p>当你熟悉其他 Python API 时，你可能会惊讶于 bpy API 中的新数据块无法通过调用类来创建：</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; bpy.types.Mesh()
Traceback (most recent call last):
  File &quot;&lt;blender_console&gt;&quot;, line 1, in &lt;module&gt;
TypeError: bpy_struct.__new__(type): expected a single argument

</code></pre></div><p>这是 API 设计的故意设计。Blender Python API 无法创建存在于主 Blender 数据库（通过 访问bpy.data）之外的 Blender 数据，因为这些数据由 Blender 管理（保存、加载、撤消、附加等）。</p> <p>通过 meshs 中的集合方法添加和删除数据bpy.data，例如：</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; mesh = bpy.data.meshes.new(name=&quot;MyMesh&quot;)
&gt;&gt;&gt; print(mesh)
&lt;bpy_struct, Mesh(&quot;MyMesh.001&quot;)&gt;
&gt;&gt;&gt; bpy.data.meshes.remove(mesh)
</code></pre></div><h3 id="自定义属性"><a href="#自定义属性" class="header-anchor">#</a> 自定义属性</h3> <p>Python 可以访问任何具有 ID 的数据块（可以链接并从中访问的数据bpy.data）上的属性。分配属性时，您可以选择自己的名称，这些名称将在需要时创建，如果它们已经存在，则会被覆盖。</p> <p>该数据与 blend 文件一起保存并与对象一起复制，例如：</p> <div class="language- extra-class"><pre class="language-text"><code>bpy.context.object[&quot;MyOwnProperty&quot;] = 42

if &quot;SomeProp&quot; in bpy.context.object:
    print(&quot;Property found&quot;)

# Use the get function like a Python dictionary
# which can have a fallback value.
value = bpy.data.scenes[&quot;Scene&quot;].get(&quot;test_prop&quot;, &quot;fallback value&quot;)

# dictionaries can be assigned as long as they only use basic types.
collection = bpy.data.collections.new(&quot;MyTestCollection&quot;)
collection[&quot;MySettings&quot;] = {&quot;foo&quot;: 10, &quot;bar&quot;: &quot;spam&quot;, &quot;baz&quot;: {}}

del collection[&quot;MySettings&quot;]
</code></pre></div><p>请注意，这些属性只能分配基本 Python 类型：</p> <ul><li>整数、浮点数、字符串</li> <li>整数或浮点数数组</li> <li>字典（仅支持字符串键，值也必须是基本类型）</li></ul> <p>这些属性在 Python 之外有效。它们可以通过曲线制作动画或用于驱动程序路径。</p> <h2 id="语境"><a href="#语境" class="header-anchor">#</a> 语境</h2> <p>虽然能够直接按名称或列表访问数据很有用，但更常见的做法是根据用户的选择进行操作。上下文始终可用bpy.context，可用于获取活动对象、场景、工具设置以及许多其他属性。</p> <p>一些常见的用例是：</p> <div class="language- extra-class"><pre class="language-text"><code>bpy.context.object
bpy.context.selected_objects
bpy.context.visible_bones
</code></pre></div><p>请注意，上下文是只读的，这意味着这些值不能直接修改。但可以通过运行 API 函数或使用数据 API 来更改它们。</p> <p>因此会引发错误。但可以按预期工作。bpy.context.active_object = objbpy.context.view_layer.objects.active = obj</p> <p>上下文属性会根据访问位置而变化。3D 视口具有与 Python 控制台不同的上下文成员，因此在访问上下文属性时请注意确保用户状态已知。</p> <p>请参阅bpy.contextAPI 参考。</p> <h2 id="操作符-工具"><a href="#操作符-工具" class="header-anchor">#</a> 操作符（工具）</h2> <p>操作符是用户通常通过按钮、菜单项或快捷键访问的工具。从用户的角度来看，它们是一种工具，但 Python 可以通过模块使用自己的设置来运行它们bpy.ops。</p> <p>例子：</p> <div class="language- extra-class"><pre class="language-text"><code>
&gt;&gt;&gt; bpy.ops.mesh.flip_normals()
{'FINISHED'}
&gt;&gt;&gt; bpy.ops.mesh.hide(unselected=False)
{'FINISHED'}
&gt;&gt;&gt; bpy.ops.object.transform_apply()
{'FINISHED'}

</code></pre></div><blockquote><p>提示
运算符速查表列出 了所有运算符及其默认值（以 Python 语法表示），以及生成的文档。这是了解 Blender 所有运算符的好方法。</p></blockquote> <h3 id="操作符-poll"><a href="#操作符-poll" class="header-anchor">#</a> 操作符 Poll(</h3> <p>许多操作符都有一个“轮询”函数，用于检查光标是否位于有效区域或对象是否处于正确模式（编辑模式、权重绘制模式等）。当操作符的轮询函数在 Python 中失败时，会引发异常。</p> <p>例如，bpy.ops.view3d.render_border()从控制台调用会引发以下错误：</p> <div class="language- extra-class"><pre class="language-text"><code>RuntimeError: Operator bpy.ops.view3d.render_border.poll() failed, context is incorrect
</code></pre></div><p>在这种情况下，上下文必须是带有活动摄像机的 3D 视口。</p> <p>为了避免在调用运算符的任何地方使用 try-except 子句，您可以调用运算符自己的poll()函数来检查它是否可以在当前上下文中运行该运算符。</p> <div class="language- extra-class"><pre class="language-text"><code>if bpy.ops.view3d.render_border.poll():
    bpy.ops.view3d.render_border()
</code></pre></div><h2 id="集成"><a href="#集成" class="header-anchor">#</a> 集成</h2> <p>Python脚本可以通过以下方式与Blender集成：</p> <ul><li>通过定义渲染引擎。</li> <li>通过定义运算符。</li> <li>通过定义菜单、标题和面板。</li> <li>通过在现有菜单、标题和面板中插入新按钮。</li></ul> <p>在 Python 中，这是通过定义一个类来实现的，该类是现有类型的子类。</p> <p>示例运算</p> <div class="language- extra-class"><pre class="language-text"><code>import bpy


def main(context):
    for ob in context.scene.objects:
        print(ob)


class SimpleOperator(bpy.types.Operator):
    &quot;&quot;&quot;Tooltip&quot;&quot;&quot;
    bl_idname = &quot;object.simple_operator&quot;
    bl_label = &quot;Simple Object Operator&quot;

    @classmethod
    def poll(cls, context):
        return context.active_object is not None

    def execute(self, context):
        main(context)
        return {'FINISHED'}


def menu_func(self, context):
    self.layout.operator(SimpleOperator.bl_idname, text=SimpleOperator.bl_label)


# Register and add to the &quot;object&quot; menu (required to also use F3 search &quot;Simple Object Operator&quot; for quick access).
def register():
    bpy.utils.register_class(SimpleOperator)
    bpy.types.VIEW3D_MT_object.append(menu_func)


def unregister():
    bpy.utils.unregister_class(SimpleOperator)
    bpy.types.VIEW3D_MT_object.remove(menu_func)


if __name__ == &quot;__main__&quot;:
    register()

    # test call
    bpy.ops.object.simple_operator()

</code></pre></div><p>该脚本一旦运行，SimpleOperator就会在 Blender 中注册，可以从 Operator Search 中调用或添加到工具栏。</p> <p>运行脚本：</p> <ol><li><p>启动 Blender 并切换到 Scripting 工作区。</p></li> <li><p>单击文本编辑器中的新建按钮来创建一个新的文本数据块。</p></li> <li><p>从上面的代码复制并将其粘贴到文本编辑器中。</p></li> <li><p>单击运行脚本按钮。</p></li> <li><p>将光标移到 3D 视图中，打开“操作符搜索”菜单，然后输入“Simple”。</p></li> <li><p>点击搜索到的“简单操作符”项。</p></li></ol> <blockquote><p>也可以看看
带有前缀的类成员bl_记录在 API 参考中bpy.types.Operator。</p></blockquote> <h3 id="示例面板"><a href="#示例面板" class="header-anchor">#</a> 示例面板</h3> <p>面板被注册为一个类，就像一个操作符一样。请注意bl_用于设置其显示上下文的额外变量。</p> <div class="language- extra-class"><pre class="language-text"><code>import bpy


class HelloWorldPanel(bpy.types.Panel):
    &quot;&quot;&quot;Creates a Panel in the Object properties window&quot;&quot;&quot;
    bl_label = &quot;Hello World Panel&quot;
    bl_idname = &quot;OBJECT_PT_hello&quot;
    bl_space_type = 'PROPERTIES'
    bl_region_type = 'WINDOW'
    bl_context = &quot;object&quot;

    def draw(self, context):
        layout = self.layout

        obj = context.object

        row = layout.row()
        row.label(text=&quot;Hello world!&quot;, icon='WORLD_DATA')

        row = layout.row()
        row.label(text=&quot;Active object is: &quot; + obj.name)
        row = layout.row()
        row.prop(obj, &quot;name&quot;)

        row = layout.row()
        row.operator(&quot;mesh.primitive_cube_add&quot;)


def register():
    bpy.utils.register_class(HelloWorldPanel)


def unregister():
    bpy.utils.unregister_class(HelloWorldPanel)


if __name__ == &quot;__main__&quot;:
    register()
</code></pre></div><p>运行脚本：</p> <ol><li><p>启动 Blender 并切换到 Scripting 工作区。</p></li> <li><p>单击文本编辑器中的新建按钮来创建一个新的文本数据块。</p></li> <li><p>从上面的代码复制并将其粘贴到文本编辑器中。</p></li> <li><p>单击运行脚本按钮。</p></li></ol> <p>查看结果：</p> <ol><li><p>选择默认立方体。</p></li> <li><p>单击按钮面板中的对象属性图标（最右边；显示为一个小立方体）。</p></li> <li><p>向下滚动即可看到名为“Hello World Panel”的面板。</p></li> <li><p>更改对象名称也会更新Hello World Panel 的名称：字段。</p></li></ol> <p>注意行分布以及通过代码定义的标签和属性。</p> <blockquote><p>也可看看
bpy.types.Panel</p></blockquote> <h2 id="类型"><a href="#类型" class="header-anchor">#</a> 类型</h2> <p>Blender 定义了许多 Python 类型，但也使用 Python 原生类型。Blender 的 Python API 可分为三类。</p> <p>原生类型
在简单的情况下，返回数字或字符串作为自定义类型会很麻烦，因此将它们作为普通 Python 类型进行访问。</p> <ul><li><p>Blender 浮点数、整数、布尔值 -&gt; 浮点数、整数、布尔值</p></li> <li><p>Blender 枚举器 -&gt; 字符串</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; C.object.rotation_mode = 'AXIS_ANGLE'
</code></pre></div><ul><li>Blender 枚举器（多个）-&gt; 字符串集</li></ul> <div class="language- extra-class"><pre class="language-text"><code># setting multiple camera overlay guides
bpy.context.scene.camera.data.show_guide = {'GOLDEN', 'CENTER'}

# passing as an operator argument for report types
self.report({'WARNING', 'INFO'}, &quot;Some message!&quot;)
</code></pre></div><h3 id="内部类型"><a href="#内部类型" class="header-anchor">#</a> 内部类型</h3> <p>bpy.types.bpy_struct用于 Blender 数据块和集合。还用于包含其自身属性的数据：集合、网格、骨骼、场景等。</p> <p>有两种主要类型可以包装 Blender 的数据，一种用于数据块（内部称为bpy_struct），另一种用于属性。</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; bpy.context.object
bpy.data.objects['Cube']
&gt;&gt;&gt; C.scene.objects
bpy.data.scenes['Scene'].objects

</code></pre></div><p>请注意，这些类型引用了 Blender 的数据，因此对它们的修改是立即可见的。</p> <h3 id="mathutils"><a href="#mathutils" class="header-anchor">#</a> Mathutils</h3> <p>可从 访问的mathutils是向量、四元数、欧拉角、矩阵和颜色类型。某些属性（例如bpy.types.Object.location、 bpy.types.PoseBone.rotation_euler和 ）bpy.types.Scene.cursor_location 可作为特殊数学类型访问，这些类型可一起使用并以各种有用的方式进行操作。</p> <p>矩阵、向量乘法的示例：</p> <div class="language- extra-class"><pre class="language-text"><code>bpy.context.object.matrix_world @ bpy.context.object.data.verts[0].co
</code></pre></div><blockquote><p>笔记
mathutils 类型保留对 Blender 内部数据的引用，因此可以应用更改。
例子：</p> <div class="language- extra-class"><pre class="language-text"><code></code></pre></div></blockquote> <h1 id="modifies-the-z-axis-in-place"><a href="#modifies-the-z-axis-in-place" class="header-anchor">#</a> modifies the Z axis in place.</h1> <p>bpy.context.object.location.z += 2.0</p> <h1 id="location-variable-holds-a-reference-to-the-object-too"><a href="#location-variable-holds-a-reference-to-the-object-too" class="header-anchor">#</a> location variable holds a reference to the object too.</h1> <p>location = bpy.context.object.location
location *= 2.0</p> <h1 id="copying-the-value-drops-the-reference-so-the-value-can-be-passed-to"><a href="#copying-the-value-drops-the-reference-so-the-value-can-be-passed-to" class="header-anchor">#</a> Copying the value drops the reference so the value can be passed to</h1> <h1 id="functions-and-modified-without-unwanted-side-effects"><a href="#functions-and-modified-without-unwanted-side-effects" class="header-anchor">#</a> functions and modified without unwanted side effects.</h1> <p>location = bpy.context.object.location.copy()</p> <div class="language- extra-class"><pre class="language-text"><code>## 动画片
通过Python添加关键帧有两种方法。

第一种是直接通过关键属性，就像用户从按钮插入关键帧一样。您也可以手动创建曲线和关键帧数据，然后将路径设置为属性。以下是两种方法的示例。两者都在活动对象的 Z 轴上插入关键帧。

简单示例：
</code></pre></div><p>obj = bpy.context.object
obj.location[2] = 0.0
obj.keyframe_insert(data_path=&quot;location&quot;, frame=10.0, index=2)
obj.location[2] = 1.0
obj.keyframe_insert(data_path=&quot;location&quot;, frame=20.0, index=2)</p> <div class="language- extra-class"><pre class="language-text"><code>使用低级函数：
</code></pre></div><p>obj = bpy.context.object
obj.animation_data_create()
obj.animation_data.action = bpy.data.actions.new(name=&quot;MyAction&quot;)
fcu_z = obj.animation_data.action.fcurves.new(data_path=&quot;location&quot;, index=2)
fcu_z.keyframe_points.add(2)
fcu_z.keyframe_points[0].co = 10.0, 0.0
fcu_z.keyframe_points[1].co = 20.0, 1.0</p> <div class="language- extra-class"><pre class="language-text"><code></code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/genmo/assets/js/app.26c693c1.js" defer></script><script src="/genmo/assets/js/2.778bb4ad.js" defer></script><script src="/genmo/assets/js/1.50b457b8.js" defer></script><script src="/genmo/assets/js/29.55f636cd.js" defer></script>
  </body>
</html>
